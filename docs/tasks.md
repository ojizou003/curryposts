# カレー投稿ギャラリーサイト開発タスク

## 実装技術構成
- **フレームワーク**: Next.js 14 (App Router)
- **ホスティング**: Vercel（無料プラン）
- **データ管理**: JSONファイル（/data/posts.json）
- **スタイリング**: Tailwind CSS
- **認証**: 管理者ページはパスワード保護（環境変数で設定）

## 開発タスク一覧

### フェーズ1: プロジェクト初期化
#### ✅ タスク1.1: Next.jsプロジェクト初期化
- [x] Next.js 14 プロジェクトを作成
- [x] TypeScript設定
- [x] Tailwind CSS設定
- [x] ESLint設定
- [x] App Router構成
- [x] 開発サーバー起動確認

### フェーズ2: 基本レイアウト作成
#### ✅ タスク2.1: 基本レイアウト作成
- [x] レイアウトコンポーネント作成
- [x] ヘッダーコンポーネント作成
- [x] フッターコンポーネント作成
- [x] グローバルスタイル設定
- [x] 基本的なページ構造

### フェーズ3: データ管理機能実装
#### ✅ タスク3.1: データ管理機能実装
- [x] データ型定義（TypeScriptインターフェース）
- [x] JSONデータファイル構造作成
- [x] データ読み書きユーティリティ関数作成
- [x] APIエンドポイント作成（GET, POST, PUT, DELETE）
- [x] データバリデーション関数作成

### フェーズ4: トップページ実装
#### ✅ タスク4.1: トップページ実装
- [x] 投稿ギャラリーコンポーネント作成
- [x] 都道府県フィルターコンポーネント作成
- [x] 無限スクロール機能実装（Intersection Observer）
- [x] 埋め込みコード表示コンポーネント作成
- [x] レスポンシブデザイン適用
- [x] ローディング状態表示

### フェーズ5: 管理者ページ実装
#### ✅ タスク5.1: 管理者ページ実装
- [x] 管理者ページレイアウト作成
- [x] 投稿登録フォーム作成
- [x] 都道府県選択コンポーネント作成
- [x] 投稿一覧表示コンポーネント作成
- [x] 編集・削除機能実装
- [x] フォームバリデーション実装

#### ✅ タスク5.2: 環境変数設定
- [x] .env_sampleファイル作成
- [x] .env.localファイル作成とパスワード設定
- [x] 環境変数読み込みユーティリティ関数作成
- [x] TypeScript型定義追加
- [x] 環境変数管理設定完了

### フェーズ6: スタイリング調整
#### ✅ タスク6.1: スタイリング調整
- [x] デザインシステム定義
- [x] カラーテーマ設定（カレーをイメージした温かい配色）
- [x] タイポグラフィ設定（日本語最適化）
- [x] モバイル表示最適化
- [x] アニメーション・トランジション追加
- [x] アクセシビリティ対応
- [x] ヘッダーとフッターのデザイン改善
- [x] 投稿カードのデザイン改善
- [x] 管理者ページUI改善

### フェーズ7: デプロイ設定
#### ⏳ タスク7.1: デプロイ設定
- [ ] Vercelデプロイ設定
- [ ] 環境変数設定
- [ ] ビルド設定最適化
- [ ] パフォーマンス最適化
- [ ] SEO設定

## 詳細実装内容

### タスク3.1: データ管理機能
- **データ型**: Post型（id, prefecture, embedCode, createdAt）
- **データ形式**: JSONファイル（/data/posts.json）
- **APIエンドポイント**: /api/posts（GET, POST, PUT, DELETE）
- **バリデーション**: 必須項目チェック、埋め込みコード形式検証

### タスク4.1: トップページ
- **無限スクロール**: Intersection Observer API使用
- **フィルター機能**: 47都道府県のドロップダウン
- **埋め込み表示**: dangerouslySetInnerHTMLで安全に表示
- **レスポンシブ**: Tailwind CSSのブレークポイント使用

### タスク5.1: 管理者ページ
- **登録フォーム**: 都道府県選択、埋め込みコード入力
- **編集機能**: 既存投稿の編集・削除
- **プレビュー機能**: 登録前に埋め込みコードをプレビュー
- **バリデーション**: クライアント・サーバーサイド両方

### タスク5.2: 環境変数設定
- **環境変数ファイル**: .env._ample（テンプレート）、.env.local（実際の設定）
- **設定項目**: NEXT_PUBLIC_ADMIN_PASSWORD、NEXT_PUBLIC_APP_NAME、NEXT_PUBLIC_APP_DESCRIPTION
- **読み込み関数**: getAdminPassword()、getAppName()、getAppDescription()
- **型定義**: src/types/env.d.ts で環境変数の型を定義
- **セキュリティ**: .gitignore で .env.local を保護

## 技術的考慮事項

### セキュリティ
- 埋め込みコードのXSS対策
- 入力値のサニタイズ
- APIエンドポイントの保護
- 環境変数によるパスワード管理
- .env.localのGit除外設定

### パフォーマンス
- 埋め込みコードの遅延読み込み
- 画像の最適化
- キャッシュ戦略

### ユーザビリティ
- 直感的な操作方法
- エラー表示
- ローディング状態

## テスト計画
- [ ] 単体テスト（ユーティリティ関数）
- [ ] 統合テスト（APIエンドポイント）
- [ ] E2Eテスト（主要ユーザーフロー）
- [ ] レスポンシブデザインテスト

## 進捗管理
- 各タスク完了時にチェックを更新
- 問題点や課題を追跡
- 定期的に進捗を確認