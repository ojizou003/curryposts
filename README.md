# 🍛 カレーギャラリー X

Xから集めた日本全国・海外の美味しいカレー投稿を閲覧できるギャラリーサイトです。都道府県別に絞り込んで、地元のカレーショップや旅行先のカレー情報を探しましょう！

## 📊 現在の投稿状況
- **投稿数**: 11件
- **カバー地域**: 日本全国8都道府県 + 海外
- **最新投稿**: 2025年10月13日
- **注目のカレー**: スパイスカレー、サリサリカレー、ライスカレーなど

## 🍛 技術構成

- **フレームワーク**: Next.js 14 (App Router)
- **ホスティング**: Vercel
- **データ管理**: JSONファイル (/data/posts.json)
- **スタイリング**: Tailwind CSS
- **認証**: 管理者ページはパスワード保護（環境変数で設定）

## 🚀 主な機能

### 📱 閲覧者向け機能
- **投稿ギャラリー**: Xの埋め込み投稿を美しく表示
- **都道府県フィルター**: 47都道府県+海外から選択可能
- **無限スクロール**: 快適な閲覧体験
- **レスポンシブデザイン**: スマートフォン・タブレット対応
- **リアルタイム表示**: 新着投稿が即時反映

### 🛠️ 管理者向け機能
- **投稿管理**: 新規投稿の追加・編集・削除
- **埋め込みコード対応**: Xの投稿URLや埋め込みコードをそのまま登録
- **都道府県分類**: 投稿を地域別に整理
- **セキュアな認証**: パスワード保護された管理者ページ
- **即時反映**: 変更内容がすぐにサイトに表示

### 🎨 デザイン・UX
- **PWA対応**: モバイルアプリとしてインストール可能
- **カレーをテーマ**: 温かみのあるカラーリング
- **アクセシブル**: キーボード操作やスクリーンリーダー対応

## 📋 開発環境セットアップ

### 1. リポジトリのクローン

```bash
git clone <repository-url>
cd curryposts
```

### 2. 依存関係のインストール

```bash
npm install
```

### 3. 環境変数の設定

```bash
cp .env.example .env.local
```

`.env.local` ファイルを編集して、管理者パスワードを設定してください：

```env
NEXT_PUBLIC_ADMIN_PASSWORD=your_secure_password_here
NEXT_PUBLIC_APP_NAME=カレー投稿ギャラリー
NEXT_PUBLIC_APP_DESCRIPTION=Xのカレーに関する投稿を集めたギャラリーサイト
```

### 4. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで [http://localhost:3000](http://localhost:3000) を開いてください。

## 🌐 Vercelデプロイ手順

### 🔧 **人間が行うべき手順**

#### 1. Vercelプロジェクトの作成
1. [Vercelダッシュボード](https://vercel.com/dashboard)にログイン
2. 「New Project」をクリック
3. GitHubリポジトリを連携
4. `curryposts` リポジトリを選択
5. Import Project

#### 2. 環境変数の設定（必須）
Vercelプロジェクト設定で以下の環境変数を設定してください：

```env
# 基本設定
NEXT_PUBLIC_ADMIN_PASSWORD=production_secure_password_here
NEXT_PUBLIC_APP_NAME=カレー投稿ギャラリー
NEXT_PUBLIC_APP_DESCRIPTION=Xのカレーに関する投稿を集めたギャラリーサイト

# デプロイ設定
VERCEL_URL=your-vercel-app-url.vercel.app
VERCEL_ENV=production

# API設定
API_BASE_URL=https://your-vercel-app-url.vercel.app/api

# SEO用
NEXT_PUBLIC_BASE_URL=https://your-vercel-app-url.vercel.app
```

**⚠️ 重要**: `NEXT_PUBLIC_ADMIN_PASSWORD` はセキュリティのため、必ず強力なパスワードを設定してください。

#### 3. カスタムドメインの設定（任意）
1. Vercelプロジェクトの「Settings」→「Domains」
2. カスタムドメインを追加
3. DNSレコードを設定

#### 4. SSL証明書の確認
Vercelが自動的にSSL証明書を設定しますが、有効か確認してください。

#### 5. 本番環境での動作確認
1. デプロイ完了後、サイトにアクセス
2. 管理者ページにログインできるか確認
3. 投稿機能が正常に動作するかテスト
4. モバイル表示の確認

#### 6. パフォーマンス監視設定（推奨）
- Vercel Analyticsの有効化
- Google Search Consoleへのサイト登録
- Google Analyticsの設定（任意）

### 🤖 自動化されている設定

- ✅ ビルド設定最適化
- ✅ SEOメタデータ設定
- ✅ PWA設定
- ✅ サイトマップ自動生成
- ✅ robots.txt設定
- ✅ パフォーマンス最適化

## 📂 プロジェクト構成

```
curryposts/
├── src/
│   ├── app/                 # Next.js App Router
│   ├── components/          # Reactコンポーネント
│   ├── types/              # TypeScript型定義
│   └── lib/                # ユーティリティ関数
├── data/                   # JSONデータファイル
├── public/                 # 静的ファイル
├── docs/                   # ドキュメント
├── vercel.json            # Vercel設定
├── next.config.ts         # Next.js設定
├── tailwind.config.ts     # Tailwind CSS設定
└── package.json           # プロジェクト設定
```

## 🔧 APIエンドポイント

- `GET /api/posts` - 投稿一覧取得
- `POST /api/posts` - 新規投稿作成
- `PUT /api/posts/[id]` - 投稿更新
- `DELETE /api/posts/[id]` - 投稿削除

## 📝 管理者ページ

URL: `/admin`

設定したパスワードでログインしてください。

## 🛠️ 開発スクリプト

```bash
npm run dev          # 開発サーバー起動
npm run build        # 本番用ビルド
npm run start        # 本番サーバー起動
npm run lint         # ESLint実行
```

## 💡 利用例

### 🗺️ カレーショップ探し
- **旅行先**: 行く予定の地域でカレー投稿を検索
- **新規開店**: 近くの新しいカレーショップを発見
- **人気店**: 多くの投稿がある注目の店舗をチェック

### 📱 投稿の活用方法
- **Xからの埋め込み**: 投稿画面に埋め込みコードを貼り付け
- **リアルタイム共有**: 最新のカレー情報を共有
- **地域別整理**: 都道府県で整理して分かりやすく表示

## 🌟 登録されているカレーの種類

### 🌶️ スパイスカレー
- **北海道**: 檍のカツカレー、フルーツスパイスカレー
- **愛知県**: ステーキカレー（Rサイズ）
- **大阪府**: 大阪まるせ（5種類のカレー）
- **長崎県**: クスノキ食堂スパイスカレー

### 🥘 伝統・地域カレー
- **群馬県**: サリサリカレー（パキスタン風）
- **熊本県**: SANJIのチーズナンカレー
- **福岡県**: スリランカレー、西インド系カレー
- **海外**: インドのラッシーカレー

### 🍚 創菜・バリエーション
- **サラッダ系**: フルーツたっぷりのカレー
- **チキンカレー**: カレーにジャガイモ入れるスタイル

## 🔄 運用フロー（ローカルメンテ・Vercel閲覧専用）

### 📋 推奨される運用方法

このプロジェクトは「ローカルでメンテナンス、Vercelで閲覧専用」という構成で運用することを推奨します。

### 🛠️ 開発・メンテナンス環境（ローカル）

1. **ローカル環境で管理者機能を使用**
   ```bash
   npm run dev
   # http://localhost:3000/admin にアクセス
   ```

2. **投稿の管理**
   - 新規投稿の追加
   - 既存投稿の編集
   - 投稿の削除

3. **データ保存**
   - 変更は `data/posts.json` に自動保存
   - Gitで変更を管理

### 🚀 本番環境（Vercel）

1. **閲覧専用サイト**
   - 一般ユーザーは投稿閲覧のみ可能
   - 管理者機能は無効化

2. **管理者ページアクセス**
   - 閲覧は可能
   - 編集・削除はブロック（403エラー）

### 🔄 デプロイ手順

1. **ローカルで変更を反映**
   ```bash
   # 投稿を追加・編集・削除
   npm run dev で確認
   ```

2. **Gitにコミット**
   ```bash
   git add .
   git commit -m "投稿を更新"
   git push
   ```

3. **Vercelに自動デプロイ**
   - GitHub連携により自動デプロイ
   - 数分で反映完了

### ✅ この構成のメリット

- **安全性**: 本番環境での意図しない変更を防止
- **シンプルさ**: データベース不要のシンプル構成
- **コスト**: Vercel無料プランで運用可能
- **制御**: 管理者は完全なコンテンツ管理権限を持つ

## 🔒 セキュリティについて

- 埋め込みコードのXSS対策を実装
- 入力値のサニタイズ
- 環境変数によるパスワード管理
- APIエンドポイントの保護

## ⚠️ Vercel環境でのデータ永続化について

現在の実装では、Vercelのサーバーレス環境でデータをメモリ内に一時的に保存しています。これにより以下の制限事項があります：

### 現在の制限事項
- デプロイ時にデータがリセットされます
- サーバー再起動時に変更が失われます
- 実稼働環境には適していません

### 🔧 推奨される永続化ソリューション

#### 1. Vercel KV（推奨）
- Vercelが提供するRedis互換のキーバリューストア
- 簡単な実装で確実なデータ永続化
- 無料プランあり

#### 2. Vercel Postgres
- Vercelが提供するPostgreSQLデータベース
- 本格的なデータ管理が必要な場合に最適

#### 3. 外部データベース
- Supabase、PlanetScale、Neonなど
- 複雑なデータ構造が必要な場合

### 実装方法
本番環境での運用を検討されている場合は、上記のいずれかのソリューションを実装することをお勧めします。

## 📄 ライセンス

MIT License
